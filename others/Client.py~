import socket
import pickle

def send_message( address, message ) : # it will send message, then recv the response message
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    print("KK")
    sock.connect(address)

    # send object 
    print("JJ")
    message_serial = pickle.dumps( message )
    sock.send(message_serial)
    sock.shutdown(socket.SHUT_WR)
    print("II")

    # Receive data from the server and shut down
    received = ''
    input = True
    while input:
        input = sock.recv(4096)
        received += input
    recv_message = pickle.loads(received)
    sock.close()

    return recv_message

def sendonly_message( address, message) : # it will only send message, then shutdown socket
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    socket.connect( address )

    message_serical = pickle.dumps( message )
    socket.send(message_serial)
    socket.close()
